var g_mid;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._Item_list_mails=t.MailItem},n._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;t.label_list_empty.visible=!1,t.moduleParam&&t.moduleParam.mails&&t.setData({mails:t.moduleParam.mails})},n._data_list_mails=function(){var t=this;return t.data.mails},n._click_list_mails=function(e){var i=this,a=e.item;gd.mailCtrl.setRead(a[gc.dsConsts.MailEntity.id],function(){t.MailInfo.create().setData({mailInfo:a}).show().onClose(function(){i.refreshList("list_mails")})},i)},n.dataChanged=function(){var t=this;e.prototype.dataChanged.call(this),t.label_list_empty.visible=t.data.mails.length<=0},n._tap_btn_onekey=function(){var t=this;gd.mailCtrl.pickAllItems(function(){t.refreshList("list_mails")},t)},i}(mo.gui.Dlg);t.Mail=e,egret.registerClass(e,"g_mid.Mail"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.ModuleCfgItem;t.targetClass=e,mo.moduleMgr.registerModule(t),t.onPreAsync(function(t,e){gd.mailCtrl.getList(function(i){t.mails=i,e()},this)})})}(g_mid||(g_mid={}));var g_mid;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.img_new.visible=!1},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data,a=gc.dsConsts.MailEntity;e.label_title.text=i[a.title],e.label_date.text=Date.newDate(i[a.addTime]).toFormat("YYYY-MM-DD HH24:MI:SS"),e.img_new.visible=!i[a.isRead]&&!i[a.isPicked],e.label_got.visible=i[a.isPicked],e.ico_attach.visible=Object.keys(i[a.items]||{}).length>0},e}(mo.gui.ItemRenderer);t.MailItem=e,egret.registerClass(e,"g_mid.MailItem")}(g_mid||(g_mid={}));var g_mid;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){var e=this;t.prototype._initProp.call(this),e._Item_list_items=g_base.BaseItemCell},a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a._data_list_items=function(){var t=this;return utils.itemObj2ObjArr(t.data.mailInfo[gc.dsConsts.MailEntity.items])},a.dataChanged=function(){var e=this;t.prototype.dataChanged.call(this);var i=e.data.mailInfo,a=gc.dsConsts.MailEntity,n=(i[a.type],i[a.replaceArgs]);if(n&&n.length>0){var l=[i[a.content]].concat(n);e.label_text.text=mo.STR.format.apply(mo.STR,l)}else e.label_text.text=i[a.content];var s=Object.keys(i[a.items]||{}).length>0;e.btn_get.icon=s?"btn_txt_g_getattachment":"btn_txt_g_ok",e.label_got.visible=i[a.isPicked]&&s,e.btn_get.visible=!e.label_got.visible},a._tap_btn_get=function(){var t=this,e=t.data.mailInfo,i=gc.dsConsts.MailEntity,a=Object.keys(e[i.items]||{}).length>0;a?gd.mailCtrl.pickItems(e[i.id],function(){t.close()},t):t.close()},e}(mo.gui.Dlg);t.MailInfo=e,egret.registerClass(e,"g_mid.MailInfo")}(g_mid||(g_mid={}));