var g_treasure;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var r=(__define,e),i=r.prototype;return i._initProp=function(){t.prototype._initProp.call(this);var e=this;e.outsideClosable=!0,e._Item_list_items=g_base.BaseItemCell},i._childrenCreated=function(){var e=this;t.prototype._childrenCreated.call(this);mo.getJSONWithFileName(gc.cfg_c_game);e.label_once.text=gd.activityCtrl.getLotteryCost(1),e.label_ten.text=gd.activityCtrl.getLotteryCost(10)},i._data_list_items=function(){var t=this;return t.data.items},i._tap_btn_again1=function(){var t=this,t=this;gd.activityCtrl.lottery(1,t.lotteryResult,t)},i._tap_btn_again2=function(){var t=this;gd.activityCtrl.lottery(10,t.lotteryResult,t)},i.lotteryResult=function(t){var r=this;r.close(),e.create().setData({items:utils.itemObjArr2ObjArr(t)}).show()},e}(mo.gui.Dlg);t.MoJinGain=e,egret.registerClass(e,"g_treasure.MoJinGain")}(g_treasure||(g_treasure={}));var g_treasure;!function(t){var e=function(e){function r(){e.apply(this,arguments)}__extends(r,e);var i=(__define,r),a=i.prototype;return a._initProp=function(){var t=this;e.prototype._initProp.call(this),t._layerOpt.shownWithAction=!1,t.registerClassByKey(gd.ChatCtrl,gd.ChatCtrl.ON_LOTTERY_UPDATE,t.onChatUpdate)},a._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;t.resBar.grp_gold.visible=!1;for(var r=mo.getJSONWithFileName(gc.cfg_c_game),i=r[gc.id_c_game.lotteryShowCfg][0].split(","),a=r[gc.id_c_game.lotteryShowCfg][1].split(","),o=[].concat(i).concat(a),n=0,c=16;c>n;n++){var s=o[n],l=t["item_"+n];l.onClick(t._showDetai,t,s),l.source=resHelper.getItemIconPath(s);var g=t["border_"+n],_=mo.getJSONWithFileNameAndID(gc.cfg_t_item,s),u=_[gc.t_item_color];g.source=resHelper.getBorderByQuality(1,u),l.effectId=5==u?33:34}var _=mo.getJSONWithFileNameAndID(gc.cfg_t_item,r[gc.id_c_game.lotteryShowCfg][2]),u=_[gc.t_item_color];t.item_sp.source=resHelper.getItemIconPath(r[gc.id_c_game.lotteryShowCfg][2]),t.item_sp.onClick(t._showDetai,t,r[gc.id_c_game.lotteryShowCfg][2]),t.item_sp.effectId=5==u?33:34,t.border_sp.source=resHelper.getBorderByQuality(1,u),t.efx_sp.effectId=5==u?18:19,t.efx_sp.startLoadByKey(t.efx_sp.effectId,function(){t.efx_sp&&(t.efx_sp.width=t.efx_sp.height=0)},t);var d=r[gc.id_c_game.lotteryCostCfg][8]||1;t.label_once.text=gd.activityCtrl.getLotteryCost(1),t.label_ten.text=gd.activityCtrl.getLotteryCost(10);var y=1>d;t.grp_discountTen.visible=y,t.grp_discountTen.includeInLayout=y,t.grp_discountOnce.visible=y,t.grp_discountOnce.includeInLayout=y,y&&(t.label_discountOnce.text=r[gc.id_c_game.lotteryCostCfg][0],t.label_discountTen.text=r[gc.id_c_game.lotteryCostCfg][1]);var h=gd.activityCtrl.getLotteryActivity(),f=h[gc.dsConsts.ExActivity.activity];uiHelper.setEventTime(t.label_date,Date.newDate(f[gc.dsConsts.ActivityEntity.startTime]),Date.newDate(f[gc.dsConsts.ActivityEntity.endTime])),t.onChatUpdate(gd.chatCtrl.getLotteryList())},a._showDetai=function(t,e,r){var i=gd.BagDataCtrl.create(r,null);g_base.BaseItemDetail.create().setData({bdc:i}).show()},a._tap_btn_once=function(){var t=this;gd.activityCtrl.lottery(1,t.lotteryResult,t)},a._tap_btn_ten=function(){var t=this;gd.activityCtrl.lottery(10,t.lotteryResult,t)},a._tap_btn_recharge=function(){mo.moduleMgr.pushModule(g_consts.moduleId.recharge)},a.lotteryResult=function(e){t.MoJinGain.create().setData({items:utils.itemObjArr2ObjArr(e)}).show()},a.clearChat=function(){var t=this;t.label_content.text=""},a.onChatUpdate=function(t){var e=this;e.clearChat();for(var r="",i=0;i<t.length;++i){var a=gd.chatCtrl.getChatDataStr(t[i]);r+=a+"\n"}e.label_content.text=r,process.nextTick(function(){e.scroller&&e.scroller.throwVertically(e.scroller.getMaxScrollTop(),1)})},r}(mo.gui.Dlg);t.Treasure=e,egret.registerClass(e,"g_treasure.Treasure"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.ModuleCfgItem;t.targetClass=e,t.fullScr=!0,mo.moduleMgr.registerModule(t),t.onPreAsync(function(t,e){e()})})}(g_treasure||(g_treasure={}));