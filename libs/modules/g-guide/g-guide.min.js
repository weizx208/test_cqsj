var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("afterNext",e),e.set("inPCopy",function(e,t){var r=t.layer;r.moveEnabled=!0})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("afterShow",e)})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("beforeNext",e)})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("beforeShow",e),e.set("scrollTo",function(e,t,r){var o=t.layer,n=o.scrollTo;e.push(r),n?n.apply(o,e):r()}),e.set("inPCopy",function(e,t,r){var o=t.layer,n=e[0];o.moveEnabled=!1,o.scrollTo(n,r)}),e.set("scene",function(e,t,r){var o,n=e[0],i=e[1];n.indexOf("!")>-1?mo.gui.uiScene.__className==n.substr(n.indexOf("!")+1)&&(o=i):mo.gui.uiScene.__className!=n&&(o=i),o?r(i):r()})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("judge",e),e.set("copyOnBoss",function(e,t){var r=e[0],o=e[1],n=e[2],i=gd.copyCtrl.getWinningStreak()[0],g=gd.copyCtrl.getCurMaxWaveCount(),u=gd.copyCtrl.getNormalCurCopyId();return u!=r?o:g>i?n:void 0}),e.set("scene",function(e,t){var r=e[0],o=e[1];return mo.gui.uiScene.__className!=r?o:void 0}),e.set("normalCopy",function(e,t){var r=e[0],o=e[1];return gd.copyCtrl.getNormalCurCopyId()!=r?o:void 0}),e.set("canChgEqp",function(e,t){var r=e[0],o=e[1],n=gd.heroCtrl.getMainHeroCtrl(),i=n.isNormalEquiped();return 0==r&&i?o:1!=r||i?void 0:o}),e.set("eqpChged",function(e,t){var r=e[0],o=e[1],n=g_cache.getLocalStorageItem(g_consts.GUIDE_LCK.eqpChged);return 0==r&&n?o:1!=r||n?void 0:o}),e.set("everEquiped",function(e,t){var r=e[0],o=e[1],n=g_cache.getLocalStorageItem(g_consts.GUIDE_LCK.everEquiped);return 0==r&&n?o:1!=r||n?void 0:o}),e.set("smelting",function(e,t){var r=e[0],o=e[1],n=g_cache.getLocalStorageItem(g_consts.GUIDE_LCK.hasSmelting);return 0==r&&n?o:1!=r||n?void 0:o}),e.set("buyEquip",function(e,t){var r=e[0],o=e[1],n=g_cache.getLocalStorageItem(g_consts.GUIDE_LCK.buyEquip);return 0==r&&n?o:1!=r||n?void 0:o}),e.set("selectRole",function(e,t){var r=e[0]+"",o=e[1],n=gd.heroCtrl.curSelRoleIdx,i=r.indexOf("!")>-1,g=parseInt(r.replace("!",""));return i?n==g?o:null:n!=g?o:null})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("condition",t),t.set("onBoss",function(t,r){if(e.hasDlg())return!1;var o=mo.gui.infoScene.getTray("msg");if(o.numElements>0)return!1;var n=t[0],i=gd.copyCtrl.getWinningStreak()[0],g=gd.copyCtrl.getCurMaxWaveCount(),u=gd.copyCtrl.getNormalCurCopyId();return u!=n||g>i?!1:!0}),t.set("canChgEqp",function(t,r){if(e.hasDlg())return!1;var o=t[0],n=gd.heroCtrl.getMainHeroCtrl(),i=n.isNormalEquiped();if(0==o&&!i){var g=gc.c_prop.heroEquipIndex;for(var u in g){var a=parseInt(u);if(n.getStanbyEquip(a).length>0)return!0}return!1}if(1==o&&i){var g=gc.c_prop.heroEquipIndex;for(var u in g){var a=parseInt(u),i=n.isPartEquiped(a),c=n.isEquipReddot(),d=i&&-1!=c.indexOf(a);if(d)return!0}}return!1}),t.set("scene",function(e,t){var r=e[0];if(r.indexOf("!")>-1){if(mo.gui.uiScene.__className!=r.substr(r.indexOf("!")+1))return!0}else if(mo.gui.uiScene.__className==r)return!0}),t.set("hasDlg",function(t,r){var o=t[0];mo.gui.uiScene.getTray("dlg");return 0==o&&e.hasDlg()?!1:1!=o||e.hasDlg()?!0:!1}),t.set("hasSmelting",function(e,t){var r=e[0],o=gd.equipCtrl.getSmeltArr(!0);return 0==r&&o.length>0?!1:1==r&&o.length<=0?!1:!0})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("next",e)})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("node",e),e.set("getCanEquipPart",function(e,t){if(null!=t.cfg.option.getCanEquipPart)return t.cfg.option.getCanEquipPart;var r=gd.heroCtrl.getMainHeroCtrl(),o=gc.c_prop.heroEquipIndex;for(var n in o)if(r.getStanbyEquip(n).length>0)return t.cfg.option.getCanEquipPart="eq_"+n,"eq_"+n;return null}),e.set("getCanChgPart",function(e,t){if(null!=t.cfg.option.getCanChgPart)return t.cfg.option.getCanChgPart;var r=gd.heroCtrl.getMainHeroCtrl(),o=gc.c_prop.heroEquipIndex;for(var n in o){var i=parseInt(n),g=r.isPartEquiped(i),u=r.isEquipReddot(),a=g&&-1!=u.indexOf(i);if(a)return t.cfg.option.getCanChgPart="eq_"+n,"eq_"+n}return null}),e.set("getEquipBtn",function(e,t){var r=e[0],o=t.mgr.getLayer(t.cfg.layer),n=mo.gui.helper.getChild(mo.gui.helper.getChild(o,"eqp_cell_"+r),"btn_equip");return n}),e.set("getBuyBtn",function(e,t){var r=e[0],o=t.mgr.getLayer(t.cfg.layer),n=mo.gui.helper.getChild(mo.gui.helper.getChild(o,"shop_cell_"+r),"btn_buy");return n}),e.set("getGoldBuyBtn",function(e,t){var r=gd.shopCtrl.canGoldBuyEquipIdx,o=t.mgr.getLayer(t.cfg.layer),n=mo.gui.helper.getChild(mo.gui.helper.getChild(o,"shop_cell_"+r),"btn_buy");return n}),e.set("getHeroHead",function(e,t){var r=e[0],o=t.mgr.getLayer(t.cfg.layer),n=o["ico_hero"+r];return n})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("rectNode",e),e.set("getExpcCell",function(e,t){t.layer})})}(g_guide||(g_guide={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.GUIDE.CfgHandler;mo.GUIDE.handlerMgr.set("revert",e),e.set("copyPassed",function(e,t){e[0],e[1],e[2]})})}(g_guide||(g_guide={}));var g_guide;!function(e){function t(){var e=mo.gui.uiScene.getTray("dlg");return e.numElements>0&&"EnterCopyEffect"!=e.getChildAt(0).__className?!0:!1}e.hasDlg=t}(g_guide||(g_guide={}));var g_guide;!function(e){logger.initLogger(e,"g-guide"),logger.setLvl("g-guide",4);var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var r=(__define,t),o=r.prototype;return o._initProp=function(){e.prototype._initProp.call(this);var t=this;t.lvl=0},t}(mo.GUIDE.CmdCfg);e.CmdCfg=t,egret.registerClass(t,"g_guide.CmdCfg");var r=function(e){function r(){e.apply(this,arguments)}__extends(r,e);var o=(__define,r),n=o.prototype;return n.parse=function(e){var r=mo.getJSONWithFileName(gc.cfg_c_guide),o=r[e];if(!o)return null;var n=new t;return n.id=e,n.set("revert",o[gc.c_guide_revert]),n.set("next",o[gc.c_guide_next]),n.set("condition",o[gc.c_guide_condition]),n.set("judge",o[gc.c_guide_judge]),n.set("type",o[gc.c_guide_type]),n.set("talk",o[gc.c_guide_talk]),n.set("npcIndex",o[gc.c_guide_npcIndex]),n.set("penetrable",o[gc.c_guide_penetrable],!0),n.set("endType",o[gc.c_guide_endType]),n.set("toSave",o[gc.c_guide_toSave],!0),n.set("lvl",o[gc.c_guide_lvl]),n.set("copyId",o[gc.c_guide_copyId]),n.set("taskId",o[gc.c_guide_taskId]),n.set("layer",o[gc.c_guide_layer]),n.set("node",o[gc.c_guide_node]),n.set("rectNode",o[gc.c_guide_rectNode]),n.set("beforeShow",o[gc.c_guide_beforeShow]),n.set("afterShow",o[gc.c_guide_afterShow]),n.set("beforeNext",o[gc.c_guide_beforeNext]),n.set("afterNext",o[gc.c_guide_afterNext]),n.set("actions",o[gc.c_guide_actions]),n.set("refreshEvent",o[gc.c_guide_refreshEvent]),n.set("isHook",o[gc.c_guide_isHook],!0),n.set("route",o[gc.c_guide_route]),n.set("option",o[gc.c_guide_option]),n},r}(egret.Emitter);e.GuideParser=r,egret.registerClass(r,"g_guide.GuideParser"),mo.GUIDE.mgr.parser=new r}(g_guide||(g_guide={}));var g_guide;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var r=(__define,t),o=r.prototype;return o._initProp=function(){var t=this;e.prototype._initProp.call(this),t.actionData={action:function(e,t){return"arrowleft"==e||0==e?mo.sequence(mo.moveBy(.8333333333333334,mo.p(13,0)),mo.moveBy(.4166666666666667,mo.p(4,0)),mo.moveBy(.4166666666666667,mo.p(-4,0)),mo.moveBy(.8333333333333334,mo.p(-13,0))):"circle"==e||1==e?mo.sequence(mo.scaleTo(.8333333333333334,.95,.95),mo.scaleTo(.2916666666666667,.9,.9),mo.scaleTo(.3333333333333333,.95,.95),mo.scaleTo(.8333333333333334,1,1)):"arrowdown"==e||2==e?mo.sequence(mo.moveBy(.8333333333333334,mo.p(0,-8)),mo.moveBy(.4166666666666667,mo.p(0,-3)),mo.moveBy(.4166666666666667,mo.p(0,3)),mo.moveBy(.8333333333333334,mo.p(0,8))):"arrowup"==e||3==e?mo.sequence(mo.moveBy(.8333333333333334,mo.p(0,-8)),mo.moveBy(.4166666666666667,mo.p(0,-3)),mo.moveBy(.4166666666666667,mo.p(0,3)),mo.moveBy(.8333333333333334,mo.p(0,8))):"arrowright"==e||4==e?mo.sequence(mo.moveBy(.25,mo.p(5,0)),mo.moveBy(1,mo.p(12,0)),mo.moveBy(.9583333333333334,mo.p(-12,0)),mo.moveBy(.2916666666666667,mo.p(-5,0))):void 0},initNode:function(e,t){if("arrowleft"==e||0==e)if(t.width>0&&t.height>0)t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;else if(t instanceof egret.gui.UIAsset){var r=RES.getRes(t.source);r&&(t.anchorOffsetX=r.textureWidth/2,t.anchorOffsetY=r.textureHeight/2)}if("circle"==e||1==e)if(t.width>0&&t.height>0)t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;else if(t instanceof egret.gui.UIAsset){var r=RES.getRes(t.source);r&&(t.anchorOffsetX=r.textureWidth/2,t.anchorOffsetY=r.textureHeight/2)}if("arrowdown"==e||2==e){if(t.width>0&&t.height>0)t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;else if(t instanceof egret.gui.UIAsset){var r=RES.getRes(t.source);r&&(t.anchorOffsetX=r.textureWidth/2,t.anchorOffsetY=r.textureHeight/2)}t.rotation=90.0456517834395}if("arrowup"==e||3==e){if(t.width>0&&t.height>0)t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;else if(t instanceof egret.gui.UIAsset){var r=RES.getRes(t.source);r&&(t.anchorOffsetX=r.textureWidth/2,t.anchorOffsetY=r.textureHeight/2)}t.rotation=-90.0456517834395}if("arrowright"==e||4==e){if(t.width>0&&t.height>0)t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2;else if(t instanceof egret.gui.UIAsset){var r=RES.getRes(t.source);r&&(t.anchorOffsetX=r.textureWidth/2,t.anchorOffsetY=r.textureHeight/2)}t.rotation=-180.091303566879}},loop:function(e){return"arrowleft"==e||0==e?!0:"circle"==e||1==e?!0:"arrowdown"==e||2==e?!0:"arrowup"==e||3==e?!0:"arrowright"==e||4==e?!0:void 0}}},o.onEnter=function(){var t=this;e.prototype.onEnter.call(this);var r=t.actionData;r.initNode("arrowdown",t.grp_arrow);var o=mo.repeatForever(r.action("arrowdown"));mo.ACT.run(t.grp_arrow,o),r.initNode("circle",t.grp_circle);var o=mo.repeatForever(r.action("circle"));mo.ACT.run(t.grp_circle,o)},o._childrenCreated=function(){e.prototype._childrenCreated.call(this)},t}(mo.GUIDE.GuideLayer);e.Guide2=t,egret.registerClass(t,"g_guide.Guide2"),mo.GUIDE.mgr.registerUI(3,t)}(g_guide||(g_guide={}));var egret;!function(e){var t;!function(e){e.guide=[],e.registerValueHandler(function(t){e.setValue(t,"guide")})}(t=e.project||(e.project={}))}(egret||(egret={}));var g_guide;!function(e){egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){if(egret.project.guideEnabled){var e=mo.GUIDE.mgr;e.net=gc.net,e.route=gc.iface.a_user_updateGuide,e.route_arg_key=gc.iface.a_user_updateGuide_args.guideId,e.onBaseCondition(function(e){var t=e.cfg,r=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guideCfg)[0];return gd.userCtrl.getLvl()>=r?!1:t.lvl&&t.lvl>gd.userCtrl.getLvl()?!1:(mo.R.loadTo("mapview","ico_jiantouxing",function(){}),mo.R.loadTo("mapview","ico_circlelight",function(){}),!0)}),mo.emitter.once("logined",function(){if(egret.project.guideEnabled){var e=mo.GUIDE.mgr,t=gd.userCtrl.getGuide()||"10000_0";e.initCmd(t)}})}})}(g_guide||(g_guide={}));