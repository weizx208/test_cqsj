var g_villian;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var t=this;e.prototype._initProp.call(this),t._targets=[["bg_errengudishi1-3",[[229,431],[204,247],[47,140]]],["bg_errengudishiguan4-6",[[229,431],[40,295],[47,140]]],["bg_errengudishi7-9",[[229,431],[30,260],[215,190]]],["bg_errengudishiguan",[],[100,240]]],t.curStage=3},n.onEnter=function(){e.prototype.onEnter.call(this)},n.dtor=function(){e.prototype.dtor.call(this)},n._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;gd.expeditionCtrl.getInfo(function(t){},t),t.dataChanged()},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.ui_Villianbg.source=t._targets[t.curStage][0],t._setVillianEnemyPos()},n._setVillianEnemyPos=function(){var t=this;t._targets[t.curStage][1][0]?(t.villianEnemy_1.x=t._targets[t.curStage][1][0][0],t.villianEnemy_1.y=t._targets[t.curStage][1][0][1]):t.villianEnemy_1.visible=!1,t._targets[t.curStage][1][1]?(t.villianEnemy_2.x=t._targets[t.curStage][1][1][0],t.villianEnemy_2.y=t._targets[t.curStage][1][1][1]):t.villianEnemy_2.visible=!1,t._targets[t.curStage][1][2]?(t.villianEnemy_3.x=t._targets[t.curStage][1][2][0],t.villianEnemy_3.y=t._targets[t.curStage][1][2][1]):t.villianEnemy_3.visible=!1,t.villianEnemy_1.visible||t.villianEnemy_2.visible||t.villianEnemy_3.visible||(t.villianEnemy_3.visible=!0,t.villianEnemy_3.x=t._targets[t.curStage][2][0],t.villianEnemy_3.y=t._targets[t.curStage][2][1],t.villianEnemy_3.scaleX=1.4,t.villianEnemy_3.scaleY=1.4)},n._tap_villianEnemy_1=function(){t.VillianBattle.create().setData({targe:1}).show()},n._tap_villianEnemy_2=function(){t.VillianBattle.create().setData({targe:1}).show()},n._tap_villianEnemy_3=function(){t.VillianBattle.create().setData({targe:1}).show()},n._tap_btn_villian_shop=function(){t.VillianShopLayer.create().show()},n._tap_btn_help=function(){g_base.BaseShowTip.create().setData({id:8}).show()},n._tap_btn_back=function(){mo.moduleMgr.runModule(g_consts.moduleId.fight)},i}(mo.gui.Dlg);t.VillianLayer=e,egret.registerClass(e,"g_villian.VillianLayer"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.ModuleCfgItem;t.targetClass=e,t.onPreAsync(function(t,e){e()}),mo.moduleMgr.registerModule(t)})}(g_villian||(g_villian={}));var g_comp;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data.copyId,a=mo.getJSONWithFileNameAndID(gc.cfg_t_paTaTreasury,i)[gc.t_paTaTreasury_displayId];e.img_boss.source=resHelper.getWorldBossIconPath(a),e.label_num.text=gd.copyCtrl.getTowerIndex(i),e.img_fighting.visible=!1;var n=gd.copyCtrl.getFocusTowerCopyId(),l=gd.copyCtrl.isTwerPassed(i);if(e.img_pass.visible=l,e.img_fighting.visible=!1,e.img_canGet.visible=!1,n==i)if(l){var r=gd.copyCtrl.getIsAwardArr(i),o=r[1];e.img_pass.visible=o,e.img_canGet.visible=r[0]&&!r[1]}else e.img_fighting.visible=gd.copyCtrl.getHighPata()==i},e}(mo.gui.Comp);t.VillianEnemy=e,egret.registerClass(e,"g_comp.VillianEnemy")}(g_comp||(g_comp={}));var g_villian;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._Item_list_items=t.VillianHeroCell},n._childrenCreated=function(){e.prototype._childrenCreated.call(this),this.outsideClosable=!0;var t=this;t.ico_avatar.setData({clothesID:null,weaponID:null,wingID:null,sex:0,isKing:!1})},n.dataChanged=function(){e.prototype.dataChanged.call(this)},n._data_list_items=function(){return gd.heroCtrl.getList()},n._click_list_items=function(e){var i=e.item;t.VillianSoulLayer.create().setData({curHero:i}).show()},n.onEnter=function(){var t=this;e.prototype.onEnter.call(this),t.invalidateSkinState();var i,a,n,l;if(t.pkUser){var r=t.pkUser;i=r[gc.dsConsts.PkOutUserData.name],a=r[gc.dsConsts.PkOutUserData.lvl],n=r[gc.dsConsts.PkOutUserData.vip],l=r[gc.dsConsts.PkOutUserData.userId];var o=t.getNameTxt(i);t.label_name.text=o,t.label_level.text=mo.STR.format("lv.%s",a);var s=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.pkOutCfg),g=(s[5],s[6],r[gc.dsConsts.PkOutUserData.guildName]?r[gc.dsConsts.PkOutUserData.guildName]:"");t.label_guild.text=""==g?"":mo.STR.format("[%s]",g);var _=78;mo.getJSONWithFileNameAndID(gc.cfg_t_item,_);n>0?(t.label_vipLv.text=n.toString(),t.label_name.parent.addElementAt(t.grp_vip,0)):t.grp_vip.parent&&t.grp_vip.parent.removeElement(t.grp_vip),gd.heroCtrl.getHeroDisplayByTempId(l,0,function(e){t.ico_avatar.setData({clothesID:e[0],weaponID:e[1],wingID:e[2],sex:e[3],isKing:e[4]})},this)}},n._tap_btn_attack=function(){var t=this,e=t.pkUser[gc.dsConsts.PkOutUserData.name],i=gd.pkOutCtrl.getPkValue(),a=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.pkOutCfg),n=a[6];n>i&&i+a[1]>=n?mo.showMsg(gc.id_c_msgCode.nameToRedIfGo,function(){t.startPvp(e)}):t.startPvp(e)},n.startPvp=function(t){var e=this;gd.pkOutCtrl.start(this.pkUser[gc.dsConsts.PkOutUserData.userId],gc.c_prop.fightTypeKey.pk,e.data.pkTarget?0:1,function(e){var i=gd.heroCtrl.getFightList();gd.fightCtrl.startPvpFight(i,e,gc.c_prop.fightTypeKey.pk,t)},this),e.close()},n.getNameTxt=function(t){var e="",i=t.split(".");return i&&i.length>0&&(e=i[0]),e+".神秘玩家"},i}(mo.gui.Dlg);t.VillianBattle=e,egret.registerClass(e,"g_villian.VillianBattle")}(g_villian||(g_villian={}));var g_villian;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this)},a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(mo.gui.ItemRenderer);t.VillianHeroCell=e,egret.registerClass(e,"g_villian.VillianHeroCell")}(g_villian||(g_villian={}));var g_villian;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var i=this;i._Item_list_items=t.VillianSoulCell},n._childrenCreated=function(){e.prototype._childrenCreated.call(this)},n.dataChanged=function(){e.prototype.dataChanged.call(this)},n._data_list_items=function(){return gd.heroCtrl.getList()},n._click_list_items=function(t){t.item},i}(mo.gui.Dlg);t.VillianSoulLayer=e,egret.registerClass(e,"g_villian.VillianSoulLayer")}(g_villian||(g_villian={}));var g_villian;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this)},a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this)},e}(mo.gui.ItemRenderer);t.VillianSoulCell=e,egret.registerClass(e,"g_villian.VillianSoulCell")}(g_villian||(g_villian={}));var g_villian;!function(t){var e=function(e){function i(){e.apply(this,arguments),this._comps=[]}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._Item_list_items=t.VillianShopItem},n._childrenCreated=function(){e.prototype._childrenCreated.call(this)},n.dataChanged=function(){e.prototype.dataChanged.call(this)},n._data_list_items=function(){return gd.heroCtrl.getList()},n._click_list_items=function(t){},n._tap_btn_back=function(){mo.moduleMgr.runModule(g_consts.moduleId.fight)},i}(mo.gui.Dlg);t.VillianShopLayer=e,egret.registerClass(e,"g_villian.VillianShopLayer")}(g_villian||(g_villian={}));var g_villian;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this);mo.gui.helper.setSkinName(this,g_shop.ArenaShopItem.__className)},a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data,a=(i[1],i[0]),n=(i[2],i[3]);i[4];e.ico_item.setData({itemId:a,count:0}),e.label_sw.text=n},a._tap_btn_buy=function(){},e}(mo.gui.ItemRenderer);t.VillianShopItem=e,egret.registerClass(e,"g_villian.VillianShopItem")}(g_villian||(g_villian={}));