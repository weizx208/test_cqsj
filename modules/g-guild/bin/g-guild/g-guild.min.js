var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;if(!e.data.label){var i=gd.guildPersonalCtrl.getData(),a=e.data.guildData,n=a[gc.dsConsts.GuildEntity.lvl],l=mo.getJSONWithFileNameAndID(gc.cfg_c_lvl,n);e.label_lv.text=mo.STR.format("Lv.%s",n),e.label_name.text=a[gc.dsConsts.GuildEntity.name],e.label_count.text=mo.STR.format("%s/%s",a[gc.dsConsts.GuildEntity.guildPopulation],l[gc.c_lvl_guildMan]),e.checkBtn(a,i)}},a.checkBtn=function(t,e){var i=this,a=t[gc.dsConsts.GuildEntity.id],n=e[gc.dsConsts.GuildPersonalEntity.appliedMsg];n&&-1!=n.indexOf(a)?(i.btn_join.enabled=!1,i.btn_join.icon="btn_txt_yishengqing"):(i.btn_join.enabled=!0,i.btn_join.icon="btn_txt_jiaru")},a._tap_btn_join=function(){var t=this,e=t.data.guildData;gd.guildCtrl.joinGuild(e[gc.dsConsts.GuildEntity.id],function(i){var a=i;if(a)t.delegate.close(),process.nextTick(function(){mo.moduleMgr.runModule(g_consts.moduleId.guildMineLayer)});else{var n=gd.guildPersonalCtrl.getData();t.checkBtn(e,n)}},t)},e}(mo.gui.ItemRenderer);t.GuildListItem=e,egret.registerClass(e,"g_guild.GuildListItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._layerOpt.shownWithAction=!1,i._Item_list_items=t.GuildListItem},n._childrenCreated=function(){var t=this;e.prototype._childrenCreated.call(this),t.moduleParam&&t.setData(t.moduleParam)},n._tap_btn_search=function(){t.GuildSearch.create().setData({listLayer:this}).show()},n._tap_btn_create=function(){t.CreateGuild.create().show()},n.reset=function(){var t=this;t.refreshList("list_items")},n._data_list_items=function(){for(var t,e=this,i=[],a=0;a<e.data.guildData.length;++a)t={guildData:e.data.guildData[a],guildPersonalData:e.data.guildPersonalData},i.push(t);return i},i}(mo.gui.Dlg);t.GuildListLayer=e,egret.registerClass(e,"g_guild.GuildListLayer"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.ModuleCfgItem;t.targetClass=e,t.fullScr=!0,t.sysId=gc.id_c_open.guild,mo.moduleMgr.registerModule(t),t.onPreAsync(function(t,e){var i=this;gd.guildCtrl.getInfo(function(i){var a=i[0],n=i[1],l=i[2];i[3],i[4];a||(t.guildPersonalData=n,t.guildData=l,e())},i)})})}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var t=this;e.prototype._initProp.call(this),t._layerOpt.shownWithAction=!1,t.tabIndex=0,t.tabCompArr=null,t.tabCompArr=[]},n._childrenCreated=function(){e.prototype._childrenCreated.call(this);var i=this;if(i.registerClassByKey(gd.GuildCtrl,gd.GuildCtrl.ON_GUILD_INFO_CHANGED,i.reloadData),i.registerClassByKey(gd.GuildCtrl,gc.dsConsts.GuildEntity.addUpAct.toString(),i.dataChanged),i.registerClassByKey(gd.GuildPersonalCtrl,gc.dsConsts.GuildPersonalEntity.addUpAct.toString(),i.dataChanged),i.registerClassByKey(gd.GuildPersonalCtrl,gc.dsConsts.GuildPersonalEntity.ennoble.toString(),i.dataChanged),i.grp_guildDaily.visible=!1,i.grp_guildFuli.visible=!1,i.tabCompArr=[i.grp_guildDaily,i.grp_guildFuli,i.grp_guildWar],i.tab_str.selectedIndex=0,process.nextTick(function(){i._tap_tab_str()}),i.moduleParam&&i.setData(i.moduleParam),i.moduleParam.bossId&&mo.moduleMgr.runModule(g_consts.moduleId.worldBoss,{subModuleId:1,bossId:i.moduleParam.bossId}),1==i.moduleParam.subModuleId){var i=this,a=i.data.guildData,n=a[gc.dsConsts.GuildEntity.lvl],l=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);if(n<l[8])return mo.showMsg(gc.id_c_msgCode.noGuildLevel,l[8]);t.GuildTreasure.create().show()}i.reloadData()},n._tap_tab_str=function(){var t=this,e=t.tabIndex=t.tab_str.selectedIndex,i=t.tabCompArr,a=i[e];if(a){for(var n=0,l=i.length;l>n;n++){var r=i[n];r.visible=!1}t._refreshTabComp(),a.visible=!0}},n._refreshTabComp=function(){var t=this,e=t.tabIndex;0==e?t._refreshGuildDailyGrp():1==e?t._refreshGuildFuliGrp():2==e&&t._refreshGuildWarGrp()},n._refreshGuildDailyGrp=function(){},n._refreshGuildFuliGrp=function(){},n._refreshGuildWarGrp=function(){},n.reloadData=function(){var t=this;gd.guildCtrl.getInfo(function(e){var i=e[0],a=e[1],n=e[2],l=e[3],r=e[4];i&&t.setData({guildPersonalData:a,guildData:n,guildManagerName:l,guildRank:r}),t.dataChanged()},t)},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=t.data.guildData,a=i[gc.dsConsts.GuildEntity.lvl],n=i[gc.dsConsts.GuildEntity.id],l=t.data.guildManagerName,r=i[gc.dsConsts.GuildEntity.guildPopulation],o=mo.getJSONWithFileNameAndID(gc.cfg_c_lvl,a),s=o[gc.c_lvl_guildMan],d=i[gc.dsConsts.GuildEntity.notice],g=i[gc.dsConsts.GuildEntity.addUpAct],u=i[gc.dsConsts.GuildEntity.name],c=gd.guildCtrl.getAddCombat(),_=gd.guildPersonalCtrl.getContributeValue(),p=gd.guildCtrl.getRankFileLvl(_),m=mo.getJSONWithFileNameAndID(gc.cfg_c_lvl,30>p?p+1:30);t.label_myExp.text=mo.STR.format("%s/%s",_,m[gc.c_lvl_rankFileNeedAct]),t.label_myGuildLv.text=mo.STR.format("%s级会员: ",p),t.label_attack.text=c+"",t.ico_level.visible=!1;var b=gd.guildCtrl.getLevel();b>0&&(t.ico_level.visible=!0,1==b?t.ico_level.source="ico_chujubaoku":2==b?t.ico_level.source="ico_zongjibaoku":t.ico_level.source="ico_gaojibaoku");var h=gd.guildPersonalCtrl.getEnnoble();t.label_ennoble.text=gc.c_prop.ennobleType[h],t.label_guildname.text=u,t.label_id.text=n+"",t.label_name.text=l,t.label_lv.text=mo.STR.format("Lv.%s",a),t.label_count.text=mo.STR.format("%s/%s",r,s),t.label_notice.text=d,t.bar_exp.maximum=gd.guildCtrl.getNeedExp(a),t.bar_exp.setValue(g),t.label_rank.text=t.data.guildRank+"",t.label_myPosition.text=gc.c_prop.guildPost[gd.guildPersonalCtrl.getPosition()],t.label_leftExp.text=gd.guildPersonalCtrl.getSumContribute().toString()},n._tap_btn_help=function(){var t=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);g_base.BaseShowTip.create().setData({id:16,param1:gd.guildCtrl.getExitGuildCD(),param2:t[13],param3:t[13]}).show()},n._tap_btn_member=function(){t.GuildMemberListLayer.create().show()},n._tap_btn_manager=function(){var e=this;t.GuildManager.create().setData(e.data.guildData).show()},n._tap_btn_rank=function(){var e=this;gd.rankCtrl.getAllRankArr(gc.c_prop.rankTypeKey.guildRank,function(e){e&&t.GuildRank.create().setData({rankData:e}).show()},e)},n._tap_grp_treasure=function(){var e=this,i=e.data.guildData,a=i[gc.dsConsts.GuildEntity.lvl],n=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);return a<n[8]?mo.showMsg(gc.id_c_msgCode.noGuildLevel,n[8]):void t.GuildTreasure.create().show()},n._tap_grp_benefits=function(){var e=this;t.GuildBenefitsLayer.create().setData(e.data.guildData).show()},n._tap_grp_daily=function(){var e=this;t.GuildContributeLayer.create().setData(e.data.guildData).show()},n._tap_grp_bossWar=function(){mo.moduleMgr.runModule(g_consts.moduleId.guildBossLevelList)},n._tap_grp_rob=function(){var t=this;gd.guildWarCtrl.isOpening()?gd.guildWarCtrl.enter(function(){mo.moduleMgr.runModule(g_consts.moduleId.guildwar)},t):mo.moduleMgr.runModule(g_consts.moduleId.guildwar)},n._tap_grp_copy=function(){mo.moduleMgr.runModule(g_consts.moduleId.guildCopy)},i}(mo.gui.Dlg);t.GuildMineLayer=e,egret.registerClass(e,"g_guild.GuildMineLayer"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var t=new mo.ModuleCfgItem;t.targetClass=e,t.fullScr=!0,mo.moduleMgr.registerModule(t),t.onPreAsync(function(t,e){var i=this;gd.guildCtrl.getInfo(function(i){var a=i[0],n=i[1],l=i[2],r=i[3],o=i[4];a&&(t.guildPersonalData=n,t.guildData=l,t.guildManagerName=r,t.guildRank=o,e())},i)})})}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a.onEnter=function(){t.prototype.onEnter.call(this);var e=this,i=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);e.label_yuanbao.text=""+i[1]},a._tap_btn_create=function(){var t=this;gd.guildCtrl.establishGuild(t.inputName.text,function(e){t.close(),mo.moduleMgr.curModule.subModules[0].target.close(),process.nextTick(function(){mo.moduleMgr.runModule(g_consts.moduleId.guildMineLayer)})},t)},e}(mo.gui.Dlg);t.CreateGuild=e,egret.registerClass(e,"g_guild.CreateGuild")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var t=this;t.registerClassByKey(gd.ChatCtrl,gd.ChatCtrl.ON_GUILD_LOTTERY_UPDATE,t.onLotteryUpdate)},n.dataChanged=function(){e.prototype.dataChanged.call(this)},n.onEnter=function(){e.prototype.onEnter.call(this);var t,i=this,a=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildAct),n=gd.guildCtrl.getData(),l=n[gc.dsConsts.GuildEntity.lvl];l>=30?t=a[8]:l>=15?t=a[7]:l>=5&&(t=a[6]),t=t.split(","),t.length>9&&(t.length=9);for(var r=0;r<t.length;++r){var o=i["ico_item"+r],s=i["eff_"+r],d=mo.getJSONWithFileNameAndID(gc.cfg_t_item,t[r]);o.setData({itemId:t[r],count:1}),o.label_text.visible=!1,o.onClick(function(){g_base.BaseItemDetail.create().setData({bdc:gd.BagDataCtrl.create(this.get("itemId"),null)}).show()},o),d[gc.t_item_color]>=5?s.effectId=33:s.effectId=34,s.startLoadByKey(s.effectId)}i.label_cost.text=a[2],i.label_costTen.text=a[11],i.reset(),i.onLotteryUpdate()},n.onLotteryUpdate=function(){for(var t=this,e=gd.chatCtrl.getGuildLotteryList(),i="",a=0;a<e.length;++a){var n=gd.chatCtrl.getChatDataStr(e[a]);i+=n+"\n"}t.label_content.text=i,process.nextTick(function(){t.scroller&&t.scroller.throwVertically(t.scroller.getMaxScrollTop(),1)})},n.reset=function(){var t=this,e=(mo.getJSONWithFileNameAndID(gc.cfg_c_vip,gd.userCtrl.getVip()),gd.guildPersonalCtrl.getData());t.label_exp.text=e[gc.dsConsts.GuildPersonalEntity.addUpAct].toString();var i=gd.guildCtrl.getLevel();i>0&&(1==i?(t.ico_level.source="tit_txt_g_chujibaoku",t.label_guildLv.text=mo.STR.format("行会%s级提升为中级宝库",15)):2==i?(t.ico_level.source="tit_txt_g_zongjibaoku",t.label_guildLv.text=mo.STR.format("行会%s级提升为高级宝库",30)):(t.ico_level.source="tit_txt_g_gaojibaoku",t.label_guildLv.text=mo.STR.format("宝库已达最高级")))},n._tap_btn_treasure=function(){var e=this;gd.guildCtrl.lottery(1,function(i){i=utils.itemObj2ObjArr(i),t.GuildLotteryGain.create().setData({items:i,delegate:e}).show(),e.reset()},e)},n._tap_btn_ten=function(){var e=this;gd.guildCtrl.lottery(10,function(i){i=utils.itemObj2ObjArr(i),t.GuildLotteryGain.create().setData({items:i,delegate:e}).show(),e.reset()},e)},n._tap_btn_help=function(){g_base.BaseShowTip.create().setData({id:17}).show()},i}(mo.gui.Dlg);t.GuildTreasure=e,egret.registerClass(e,"g_guild.GuildTreasure")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var i=this;i._Item_list_items=t.GuildContributeItem,i.registerClassByKey(gd.GuildCtrl,gc.dsConsts.GuildEntity.addUpAct.toString(),i.dataChanged)},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=gd.guildCtrl.getData(),a=i[gc.dsConsts.GuildEntity.lvl],n=i[gc.dsConsts.GuildEntity.addUpAct],l=gd.guildPersonalCtrl.getData(),r=l[gc.dsConsts.GuildPersonalEntity.guildAct],o=gd.guildCtrl.getRankFileLvl(r),s=mo.getJSONWithFileNameAndID(gc.cfg_c_lvl,30>o?o+1:30);t.label_myGuildLv.text="Lv."+o.toString(),t.label_myExp2.text=r.toString(),t.label_level.text=mo.STR.format("行会等级:Lv.%s",a),t.bar_exp.maximum=gd.guildCtrl.getNeedExp(a),t.bar_exp.setValue(n);var l=gd.guildPersonalCtrl.getData();t.label_exp.text=l[gc.dsConsts.GuildPersonalEntity.addUpAct].toString(),t.label_myExp.text=mo.STR.format("%s/%s",r,s[gc.c_lvl_rankFileNeedAct]),t.label_myGuildLv.text=mo.STR.format("%s级会员: ",o)},n._data_list_items=function(){var t=mo.getJSONWithFileName(gc.cfg_c_guildAct),e=[];for(var i in t)e.push(t[i]);return e.sort(function(t,e){return t[gc.c_guildAct_seniority]-e[gc.c_guildAct_seniority]}),e},n._tap_btn_back=function(){var t=this;t.close()},i}(mo.gui.Dlg);t.GuildContributeLayer=e,egret.registerClass(e,"g_guild.GuildContributeLayer")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this)},a._tap_btn_back=function(){var t=this;t.close()},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data,a=i[gc.dsConsts.GuildEntity.lvl],n=mo.getJSONWithFileNameAndID(gc.cfg_c_guildLvl,a),l=mo.getJSONWithFileName(gc.cfg_c_guildLvl),r=l[a+1],o=gd.guildPersonalCtrl.getData(),s=0,d=o[gc.dsConsts.GuildPersonalEntity.ennoble];e.label_ennoble.text=gc.c_prop.ennobleType[o[gc.dsConsts.GuildPersonalEntity.ennoble]];var g=mo.getJSONWithFileNameAndID(gc.cfg_c_guildEnnoble,d);e.label_ennobleRate.text=Math.round(g[gc.c_guildEnnoble_props]/100)+"%",e.label_lv.text="Lv."+a;for(var u=n[gc.c_guildLvl_props],c="",_=0;_<u.length;++_)if(2==u[_].length){var p=u[_][0],m=Math.round(u[_][1]*(1+s)),b=m.toString(),h=mo.STR.format("%s +%s\n",gc.c_prop.heroProp[p],b);c+=h}if(e.label_nextLv.text=mo.STR.format("(下级旗帜将在行会达到%s级后自动激活)",a+1),e.label_value.text=c,r){for(var v=[],f=r[gc.c_guildLvl_props],_=0;_<f.length;++_)v.push(Math.round(f[_][1]*(1+s)));e.label_next.text=v.join("\n"),e.grp_nextLv.visible=!0,e.label_maxLv.visible=!1}else e.grp_nextLv.visible=!1,e.label_maxLv.visible=!0},a._tap_btn_help=function(){g_base.BaseShowTip.create().setData({id:19}).show()},a._tap_label_ennobleDesc=function(){g_base.BaseShowTip.create().setData({id:23}).show()},e}(mo.gui.Dlg);t.GuildBenefitsLayer=e,egret.registerClass(e,"g_guild.GuildBenefitsLayer")}(g_guild||(g_guild={}));var g_guild;!function(t){!function(t){t[t.Apply=0]="Apply",t[t.Notice=1]="Notice",t[t.Setting=2]="Setting",t[t.Exit=3]="Exit"}(t.GuildManagerType||(t.GuildManagerType={}));var e=t.GuildManagerType,i=function(i){function a(){i.apply(this,arguments)}__extends(a,i);var n=(__define,a),l=n.prototype;return l._initProp=function(){var e=this;i.prototype._initProp.call(this),e._Item_list_items=t.GuildManagerCell,e.registerClassByKey(gd.GuildCtrl,gd.GuildCtrl.ON_GUILD_INFO_CHANGED,e.reloadData)},l.reloadData=function(){var t=this;gd.guildCtrl.getInfo(function(e){var i=e[0],a=(e[1],e[2]);e[3],e[4];i&&(t.setData(a),t.refreshList("list_items")),t.dataChanged()},t)},l.dataChanged=function(){i.prototype.dataChanged.call(this)},l.getListTypes=function(){var t,i=this,a=[],n=gd.guildPersonalCtrl.get(gc.dsConsts.GuildPersonalEntity.position);if(n==gc.c_prop.guildPostKey.chairman)for(var l=0;4>l;++l)t={guildData:i.data,type:l},a.push(t);else n==gc.c_prop.guildPostKey.viceChairman?(t={guildData:i.data,type:e.Apply},a.push(t),t={guildData:i.data,type:e.Exit},a.push(t)):(t={guildData:i.data,type:e.Exit},a.push(t));return a},l._data_list_items=function(){var t=this;return t.getListTypes()},l._tap_btn_close=function(){var t=this;t.close()},l._tap_btn_back=function(){var t=this;t.close()},a}(mo.gui.Dlg);t.GuildManager=i,egret.registerClass(i,"g_guild.GuildManager")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._childrenCreated=function(){e.prototype._childrenCreated.call(this)},n._tap_btn_action=function(){var e=this,i=e.data.guildData,a=e.data.type;if(a==t.GuildManagerType.Apply)t.GuildApplyList.create().setData(e.data).show();else if(a==t.GuildManagerType.Exit){var n=gd.guildPersonalCtrl.get(gc.dsConsts.GuildPersonalEntity.position);if(n==gc.c_prop.guildPostKey.chairman){if(gd.guildWarCtrl.isOpening())return mo.showMsg(gc.id_c_msgCode.noGuildDisband);var l=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);mo.showMsg(gc.id_c_msgCode.ifGdisband,l[5],function(){gd.guildCtrl.exitGuild(gc.c_prop.guildMemberOpKey.dissolveGuild,function(t){e.delegate.close(),mo.moduleMgr.curModule.subModules[0].target.close()},e)},e)}else{if(gd.guildWarCtrl.isOpening())return mo.showMsg(gc.id_c_msgCode.noGuildOut);var r=gd.guildCtrl.getExitGuildCD();mo.showMsg(gc.id_c_msgCode.ifQuitGuild,r,function(){gd.guildCtrl.exitGuild(gc.c_prop.guildMemberOpKey.quitGuild,function(t){e.delegate.close(),mo.moduleMgr.curModule.subModules[0].target.close()},e)},e)}}else a==t.GuildManagerType.Notice?t.GuildUpdateNotice.create().setData(i).show():a==t.GuildManagerType.Setting&&t.GuildSetting.create().setData(e.data).show()},n.dataChanged=function(){e.prototype.dataChanged.call(this);var i=this,a=i.data.type;if(a==t.GuildManagerType.Apply)i.ico_title.source="ico_ruhuishenqing",i.btn_action.icon="btn_txt_look";else if(a==t.GuildManagerType.Exit){var n=gd.guildPersonalCtrl.get(gc.dsConsts.GuildPersonalEntity.position);n==gc.c_prop.guildPostKey.chairman?(i.ico_title.source="ico_jiesangonghui",i.btn_action.icon="btn_txt_shenzhong"):(i.ico_title.source="ico_tuicuhanghui",i.btn_action.icon="btn_txt_shenzhong")}else a==t.GuildManagerType.Notice?(i.ico_title.source="ico_xiugaigonggao",i.btn_action.icon="btn_txt_xiugai"):a==t.GuildManagerType.Setting?(i.ico_title.source="ico_gonghuishezhi",i.btn_action.icon="btn_txt_setting"):999==a&&(i.ico_title.source="ico_gonghuipaihang",i.btn_action.icon="btn_txt_look")},i}(mo.gui.ItemRenderer);t.GuildManagerCell=e,egret.registerClass(e,"g_guild.GuildManagerCell")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var i=this;i._Item_list_items=t.GuildMemberItem,i.registerClassByKey(gd.GuildCtrl,gd.GuildCtrl.ON_MANAGER_POSITION_CHANGED,i.reloadData),i.registerClassByKey(gd.GuildCtrl,gd.GuildCtrl.ON_MEMBER_JOB_CHANGE,i.reset)},n._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;gd.guildCtrl.getMembers(function(e){t.reset()},t)},n.reloadData=function(){var t=this;gd.guildCtrl.getMembers(function(e){t.reset()},t)},n.reset=function(){var t=this,e=gd.guildCtrl.getData();t.setData({memberData:gd.guildCtrl.getMemberList(),guildData:e}),t.refreshList("list_items")},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=gd.guildCtrl.getData(),a=i[gc.dsConsts.GuildEntity.lvl],n=gd.guildCtrl.getMaxMember(a),l=i[gc.dsConsts.GuildEntity.guildPopulation];t.label_membercount.text="行会人数 "+l+"/"+n,t.label_level.text="Lv."+a+"   "+i[gc.dsConsts.GuildEntity.name]},n._data_list_items=function(){var t=this;return t.data.memberData},i}(mo.gui.Dlg);t.GuildMemberListLayer=e,egret.registerClass(e,"g_guild.GuildMemberListLayer")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this)},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;if(!t.data.label){var i=t.data,a=i[gc.dsConsts.GuildMember.lvl],n=i[gc.dsConsts.GuildMember.nickName],l=i[gc.dsConsts.GuildMember.combat],r=i[gc.dsConsts.GuildMember.guildAct],o=i[gc.dsConsts.GuildMember.position];t.label_level.text="Lv."+a,t.label_name.text=n,t.label_role.text=gc.c_prop.guildPost[o],t.label_attack.text=l,t.label_gongx.text=r+"";var s=i[gc.dsConsts.GuildMember.ennoble];t.label_ennoble.text=gc.c_prop.ennobleType[s];var d=gd.guildCtrl.getRankFileLvl(i[gc.dsConsts.GuildMember.guildAct]);t.label_mLv.text=d+"级会员",t.ico_head.setData({icoId:i[gc.dsConsts.GuildMember.iconId],vip:i[gc.dsConsts.GuildMember.vip]});var g=i[gc.dsConsts.GuildMember.offlineHour];0>=g?t.label_loginDate.text="在线":24>=g?t.label_loginDate.text=mo.STR.format("%s小时前离开",g):t.label_loginDate.text=mo.STR.format("%s日未登录",g/24>>0)}},n._tap_ico_head=function(){var t=this,e=t.data;mo.moduleMgr.pushModule(g_consts.moduleId.roleEnemyInfo,{userId:e[gc.dsConsts.GuildMember.userId]})},n._tap_right_rect=function(){var e=this,i=e.data;t.GuildMemberManager.create().setData({userId:i[gc.dsConsts.GuildMember.userId]}).show().onClose(function(){e.delegate.reset()})},i}(mo.gui.ItemRenderer);t.GuildMemberItem=e,egret.registerClass(e,"g_guild.GuildMemberItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.listLayer=t.data.listLayer},n._tap_btn_search=function(){var e=this;gd.guildCtrl.seekGuild(e.inputName.text,function(i){i?(t.GuildSearchResult.create().setData(i).show().onClose(function(){e.listLayer&&e.listLayer.reset&&e.listLayer.reset()}),e.close()):mo.showMsg(gc.id_c_msgCode.guildIdIsExist)},e)},i}(mo.gui.Dlg);t.GuildSearch=e,egret.registerClass(e,"g_guild.GuildSearch")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._Item_list_items=t.GuildListItem},n._data_list_items=function(){var t=this;return[{guildData:t.data}]},i}(mo.gui.Dlg);t.GuildSearchResult=e,egret.registerClass(e,"g_guild.GuildSearchResult")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments),this.joinCon=0,this.joinLvlIndex=0,this.conditions=[],this.conditionsLevel=[]}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data.guildData;e.joinCon=i[gc.dsConsts.GuildEntity.joinCon],e.joinLvl=i[gc.dsConsts.GuildEntity.joinLvl],e.label_condition.text=gc.c_prop.guildJoinCon[e.joinCon],e.label_level.text=e.joinLvl+"",e.conditions=[];for(var a in gc.c_prop.guildJoinCon)e.conditions.push(a);var n=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildSet);e.conditionsLevel=n[4].split(",")},a._tap_btn_conditionPre=function(){var t=this;t.joinCon--;var e=!1;for(var i in t.conditions)if(t.conditions[i]==t.joinCon){e=!0;break}e||(t.joinCon=t.conditions[t.conditions.length-1]),t.label_condition.text=gc.c_prop.guildJoinCon[t.joinCon]},a._tap_btn_conditionNext=function(){var t=this;t.joinCon++;var e=!1;for(var i in t.conditions)if(t.conditions[i]==t.joinCon){e=!0;break}e||(t.joinCon=t.conditions[0]),t.label_condition.text=gc.c_prop.guildJoinCon[t.joinCon]},a._tap_btn_LevelNext=function(){var t=this,e=t.conditionsLevel.indexOf(t.joinLvl);e++,e>t.conditionsLevel.length-1&&(e=0),t.joinLvl=t.conditionsLevel[e],t.label_level.text=t.joinLvl+""},a._tap_btn_LevelPre=function(){var t=this,e=t.conditionsLevel.indexOf(t.joinLvl);e--,0>e&&(e=t.conditionsLevel.length-1),t.joinLvl=t.conditionsLevel[e],t.label_level.text=t.joinLvl+""},a._tap_btn_Update=function(){var t=this;t.data.guildData;gd.guildCtrl.guildSetting(t.joinCon,t.joinLvl,function(e){t.close()},t)},e}(mo.gui.Dlg);t.GuildSetting=e,egret.registerClass(e,"g_guild.GuildSetting")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._Item_list_items=t.GuildApplyListItem},n._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;t.reloadData()},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=gd.guildCtrl.getData(),a=i[gc.dsConsts.GuildEntity.lvl],n=gd.guildCtrl.getMaxMember(a),l=i[gc.dsConsts.GuildEntity.guildPopulation];t.label_member.text="成员人数 "+l+"/"+n},n.reloadData=function(){var t=this;gd.guildCtrl.getAppliedMembers(function(e){t.setData({memberData:e}),t.dataChanged(),t.refreshList("list_items")},t)},n._data_list_items=function(){var t=this;return t.data.memberData},i}(mo.gui.Dlg);t.GuildApplyList=e,egret.registerClass(e,"g_guild.GuildApplyList")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._childrenCreated=function(){t.prototype._childrenCreated.call(this)},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.data.label||(e.label_lvl.text=""+e.data[gc.dsConsts.UserEntity.lvl],e.label_name.text=e.data[gc.dsConsts.UserEntity.nickName],e.label_combat.text=utils.formatByWan(e.data[gc.dsConsts.UserEntity.combat]),e.btn_reject.resouce="btn_gonghui_1")},a._tap_btn_agree=function(){var t=this;t.doAction(!0)},a.doAction=function(t){var e=this,i=e.data;gd.guildCtrl.appliedMembersSet(i[gc.dsConsts.UserEntity.id],t,function(){e.delegate.reloadData()},e)},a._tap_btn_reject=function(){var t=this;t.doAction(!1)},e}(mo.gui.ItemRenderer);t.GuildApplyListItem=e,egret.registerClass(e,"g_guild.GuildApplyListItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._tap_btn_cancel=function(){var t=this;t.close()},a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data.msg,a=e.data.icon;e.label_message.text=i,e.container.title=a},a._tap_btn_confirm=function(){var t=this;t.close();var e=t.data.callback;e&&e()},e}(mo.gui.Dlg);t.GuildMessageAlert=e,egret.registerClass(e,"g_guild.GuildMessageAlert")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.data.hasOwnProperty("label")||e.reset()},a.reset=function(){var t=this,e=gd.guildPersonalCtrl.getData(),i=t.data,a=(e[gc.dsConsts.GuildPersonalEntity.actData],i[gc.c_guildAct_id]),n=i[gc.c_guildAct_name],l=i[gc.c_guildAct_act],r=i[gc.c_guildAct_num],o=i[gc.c_guildAct_gold],s=i[gc.c_guildAct_icon],d=gd.guildPersonalCtrl.getActNum(a);mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildAct);if(t.label_desc.text=n,t.label_act.text="贡献 +"+l,t.label_limit.text=d+"/"+r,t.label_limit.visible=r>0,t.img_done.visible=r>0&&d>=r,t.ico_item.source=resHelper.getTaskIconPath(s),o>0&&(t.label_gold.text="金币 +"+o),t.label_gold.visible=o>0,t.label_vip.visible=!1,6==a||7==a||8==a)t.btn_act.icon="btn_txt_shangxiang",t.btn_act.visible=!t.img_done.visible,(7==a||8==a)&&(t.label_vip.visible=!0);else{t.btn_act.icon="btn_txt_qianwang";var g=i[gc.c_guildAct_uiLink];t.btn_act.visible=g.length>=2,t.btn_act.visible&&(t.btn_act.visible=!t.img_done.visible)}},a._tap_btn_act=function(){var t=this,e=t.data,i=e[gc.c_guildAct_id];if(6==i||7==i||8==i)gd.guildPersonalCtrl.pickAct(i,function(){t.reset()},t);else{var a,n,l=e[gc.c_guildAct_uiLink],n=l[0],r=l[1];switch(n){case 6:a={subModuleId:r},n=g_consts.moduleId.shop;break;case 4:a={subModuleId:r},n=g_consts.moduleId.forge;break;case 3:a={subModuleId:r},n=g_consts.moduleId.role;break;case 2:a={subModuleId:r},n=g_consts.moduleId.home;break;case 1:a={subModuleId:r},n=g_consts.moduleId.fight}n&&a&&(mo.moduleMgr.runModule(n,a),t.delegate.close())}},e}(mo.gui.ItemRenderer);t.GuildContributeItem=e,egret.registerClass(e,"g_guild.GuildContributeItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this)},n._tap_btn_enter=function(){t.GuildContributeLayer.create().show()},i}(mo.gui.Layer);t.GuildMineItem=e,egret.registerClass(e,"g_guild.GuildMineItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;e.inputNotice.text=e.data[gc.dsConsts.GuildEntity.notice]},a._tap_btn_confirm=function(){var t=this;gd.guildCtrl.setNotice(t.inputNotice.text,function(e){t.close()},t)},e}(mo.gui.Dlg);t.GuildUpdateNotice=e,egret.registerClass(e,"g_guild.GuildUpdateNotice")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a._initProp=function(){t.prototype._initProp.call(this);var e=this;e.outsideClosable=!0,e._Item_list_items=g_base.BaseItemCell},a._childrenCreated=function(){var e=this;t.prototype._childrenCreated.call(this);var i=mo.getJSONWithFileNameAndID(gc.cfg_c_game,gc.id_c_game.guildAct);e.label_cost.text=i[2],e.label_cost10.text=i[11]},a._data_list_items=function(){var t=this;return t.data.items},a._tap_btn_again1=function(){var t=this;gd.guildCtrl.lottery(1,function(i){i=utils.itemObj2ObjArr(i),e.create().setData({items:i,delegate:t.data.delegate}).show(),t.data.delegate.reset(),t.close()},t)},a._tap_btn_again2=function(){var t=this;gd.guildCtrl.lottery(10,function(i){i=utils.itemObj2ObjArr(i),e.create().setData({items:i,delegate:t.data.delegate}).show(),t.data.delegate.reset(),t.close()},t)},e}(mo.gui.Dlg);t.GuildLotteryGain=e,egret.registerClass(e,"g_guild.GuildLotteryGain")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var t=this;e.prototype._initProp.call(this),t.registerClassByKey(gd.GuildCtrl,gd.GuildCtrl.ON_MANAGER_POSITION_CHANGED,t.dataChanged)},n._childrenCreated=function(){e.prototype._childrenCreated.call(this)},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.btn_get.visible=!1,t.btn_out.visible=!1,t.btn_change.visible=!1,t.btn_release.visible=!1,t.btn_setE.visible=!1,t.btn_detail.visible=!0;var i=gd.guildCtrl.getMemberByUserId(t.data.userId),a=gd.guildPersonalCtrl.get(gc.dsConsts.GuildPersonalEntity.position),n=i[gc.dsConsts.GuildMember.position];a==gc.c_prop.guildPostKey.chairman?(n!=gc.c_prop.guildPostKey.chairman&&(n==gc.c_prop.guildPostKey.viceChairman?t.btn_release.visible=!0:n==gc.c_prop.guildPostKey.rankFile&&(t.btn_get.visible=!0),t.btn_out.visible=!0,t.btn_change.visible=!0),t.btn_setE.visible=!0,t.btn_detail.visible=!1):a==gc.c_prop.guildPostKey.viceChairman&&(n==gc.c_prop.guildPostKey.rankFile?(t.btn_out.visible=!0,t.btn_setE.visible=!0,t.btn_detail.visible=!1):n==gc.c_prop.guildPostKey.viceChairman?(t.btn_setE.visible=!0,t.btn_detail.visible=!1):t.btn_detail.visible=!0),t.btn_change.visible||t.btn_out.visible||t.btn_get.visible||t.btn_release.visible||(t.btn_setE.x=157,t.btn_setE.y=277);var l=i[gc.dsConsts.GuildMember.lvl],r=i[gc.dsConsts.GuildMember.nickName],o=i[gc.dsConsts.GuildMember.combat],s=i[gc.dsConsts.GuildMember.guildAct],d=i[gc.dsConsts.GuildMember.position],g=gd.guildCtrl.getRankFileLvl(s);t.ico_head.setData({icoId:i[gc.dsConsts.GuildMember.iconId],vip:i[gc.dsConsts.GuildMember.vip]}),t.label_level.text="Lv."+l,t.label_name.text=r,t.label_position.text=gc.c_prop.guildPost[d],t.label_attack.text=o+"",t.label_upact.text=s+"",t.label_memberLvl.text=g+"级会员";var u=i[gc.dsConsts.GuildMember.ennoble];t.label_ennoble.text=gc.c_prop.ennobleType[u]},n.doMember=function(t){var e=this,i=gd.guildCtrl.getMemberByUserId(e.data.userId),a=i[gc.dsConsts.GuildMember.userId],n=i[gc.dsConsts.GuildMember.nickName];gd.guildCtrl.opMember(t,a,n,function(t){e.close()},e)},n._tap_btn_get=function(){var t=this;t.doMember(gc.c_prop.guildMemberOpKey.increase)},n._tap_btn_out=function(){var t=this;t.doMember(gc.c_prop.guildMemberOpKey.kick)},n._tap_btn_release=function(){var t=this;t.doMember(gc.c_prop.guildMemberOpKey.release)},n._tap_btn_change=function(){var t=this;t.doMember(gc.c_prop.guildMemberOpKey.trans)},n._tap_btn_setE=function(){var e=this;t.GuildSetEnnoble.create().setData(e.data).show().onClose(function(){e.dataChanged()})},n._tap_btn_detail=function(){var e=this;t.GuildEnnobleDetail.create().setData(e.data).show()
},i}(mo.gui.Dlg);t.GuildMemberManager=e,egret.registerClass(e,"g_guild.GuildMemberManager")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments),this.ranks=[]}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){var i=this;e.prototype._initProp.call(this),i._layerOpt.shownWithAction=!1,i._Item_list_ranks=t.GuildRankItem},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=t.data.rankData,a=i[0]?i[0]:0,n=i[1],l=i[2],r=i[4],o=n[gc.dsConsts.UserRankEntity.rankType];t.ranks.length=0;for(var s=0;s<l.length;++s)t.ranks[s]={rank:s+1,userData:l[s],guildNames:r};t.label_myRankBy.text=t.getRankDesc(o)+": ",t.label_myRankDesc.text=o==gc.c_prop.rankTypeKey.chairmanCombatRank?"行会会长排行: ":"我的行会排行: ",t.label_myRank.text=a.toString(),t.label_myRankValue.text=utils.formatByWan(n[gc.dsConsts.UserRankEntity.rankValue]),t.refreshList("list_ranks")},n.getRankDesc=function(t){return t==gc.c_prop.rankTypeKey.guildRank?"行会等级":t==gc.c_prop.rankTypeKey.guildCombatRank?"行会战力":t==gc.c_prop.rankTypeKey.chairmanCombatRank?"会长战力":""},n._data_list_ranks=function(){var t=this;return t.ranks},n.getRankList=function(t){var e=this;gd.rankCtrl.getAllRankArr(t,function(t){t&&e.setData({rankData:t})},e)},n._tap_tab_rank=function(){var t=this,e=t.tab_rank.selectedIndex,i=[gc.c_prop.rankTypeKey.guildRank,gc.c_prop.rankTypeKey.guildCombatRank,gc.c_prop.rankTypeKey.chairmanCombatRank];this.getRankList(i[e])},i}(mo.gui.Dlg);t.GuildRank=e,egret.registerClass(e,"g_guild.GuildRank")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;if(e.data.userData){var i=e.data.userData,a=e.data.guildNames,n=e.data.rank,l=i[gc.dsConsts.UserRankEntity.rankType];e.label_rank.text=n;var r=a[i[gc.dsConsts.UserRankEntity.userId]];e.label_userName.text=i[gc.dsConsts.UserRankEntity.userName],e.label_guildName.text=r,l==gc.c_prop.rankTypeKey.guildRank?e.label_level.text=mo.STR.format("Lv.%s",i[gc.dsConsts.UserRankEntity.rankValue]):e.label_level.text=utils.formatByWan(i[gc.dsConsts.UserRankEntity.rankValue]),e.label_id.text=i[gc.dsConsts.UserRankEntity.userId],e.label_rankType.text=e.getRankDesc(l)}},a.getRankDesc=function(t){return t==gc.c_prop.rankTypeKey.guildRank?"":t==gc.c_prop.rankTypeKey.guildCombatRank?"战力:":t==gc.c_prop.rankTypeKey.chairmanCombatRank?"战力:":""},e}(mo.gui.ItemRenderer);t.GuildRankItem=e,egret.registerClass(e,"g_guild.GuildRankItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var i=this;i._Item_list_items=t.GuildEnnobleItem},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=gd.guildCtrl.getMemberByUserId(t.data.userId),a=i[gc.dsConsts.GuildMember.lvl],n=i[gc.dsConsts.GuildMember.nickName],l=i[gc.dsConsts.GuildMember.combat],r=i[gc.dsConsts.GuildMember.guildAct],o=i[gc.dsConsts.GuildMember.position],s=gd.guildCtrl.getRankFileLvl(i[gc.dsConsts.GuildMember.guildAct]);t.label_myGuildLv.text=s+"级会员",t.ico_head.setData({icoId:i[gc.dsConsts.GuildMember.iconId],vip:i[gc.dsConsts.GuildMember.vip]}),t.label_lv.text="Lv."+a,t.label_name.text=n,t.label_position.text=gc.c_prop.guildPost[o],t.label_combat.text=l+"",t.label_myExp.text=r+"";var d=i[gc.dsConsts.GuildMember.ennoble];t.label_ennoble.text=gc.c_prop.ennobleType[d],process.nextTick(function(){process.nextTick(function(){for(var e=0;e<t.list_items.dataProvider.length;++e)if(t.list_items.dataProvider.getItemAt(e).ennobleData[0]==d)return void(t.list_items.selectedIndex=e)})})},n._data_list_items=function(){for(var t=this,e=gd.guildCtrl.getAwardUi(),i=[],a=0;a<e.length;++a)i.push({memberData:gd.guildCtrl.getMemberByUserId(t.data.userId),ennobleData:e[a]});return i},n._tap_btn_cancel=function(){this.close()},n._tap_btn_confirm=function(){var t=this;if(!t.list_items.selectedItem)return mo.showMsg(gc.id_c_msgCode.notChooseLv);var e=t.list_items.selectedItem.ennobleData[0];t.setEnnoble(e)},n.setEnnoble=function(t){var e=this,i=gd.guildCtrl.getMemberByUserId(e.data.userId),a=i[gc.dsConsts.GuildMember.userId];gd.guildCtrl.setEnnoble(a,t,function(){i[gc.dsConsts.GuildMember.ennoble]=t;var a=i[gc.dsConsts.GuildMember.ennoble];e.label_ennoble.text=gc.c_prop.ennobleType[a],e.close()},e)},i}(mo.gui.Dlg);t.GuildSetEnnoble=e,egret.registerClass(e,"g_guild.GuildSetEnnoble")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(t){function e(){t.apply(this,arguments)}__extends(e,t);var i=(__define,e),a=i.prototype;return a.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this,i=e.data.memberData,a=e.data.ennobleData;if(a){var n=a[0],l=a[1],r=a[2],o=a[3],s=a[4],d=a[5],g=gd.guildCtrl.getRankFileLvl(i[gc.dsConsts.GuildMember.guildAct]);e.label_ennoble.text=gc.c_prop.ennobleType[n],999==r?e.label_num.text="无限":e.label_num.text=mo.STR.format("%s/%s",l,r),g>=o?e.label_need1.textColor=16777215:e.label_need1.textColor=16711680,e.label_need1.text=o+"级会员",d&&(e.label_addScale.text=mo.STR.format("%s%",Math.round(s/100)),e.label_need2.text=mo.STR.format("行会%s级开启",d)),e.enabled=!d,e.grp_addScale.visible=d,e.grp_num.visible=!e.grp_addScale.visible,e.label_need2.visible=d}},e}(mo.gui.ItemRenderer);t.GuildEnnobleItem=e,egret.registerClass(e,"g_guild.GuildEnnobleItem")}(g_guild||(g_guild={}));var g_guild;!function(t){var e=function(e){function i(){e.apply(this,arguments)}__extends(i,e);var a=(__define,i),n=a.prototype;return n._initProp=function(){e.prototype._initProp.call(this);var i=this;i._Item_list_items=t.GuildEnnobleItem},n.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,i=gd.guildCtrl.getData(),a=gd.guildPersonalCtrl.getData(),n=i[gc.dsConsts.GuildEntity.lvl],l=a[gc.dsConsts.GuildPersonalEntity.guildAct],r=gd.guildCtrl.getRankFileLvl(l),o=a[gc.dsConsts.GuildPersonalEntity.ennoble];t.label_guildLv.text="Lv."+n,t.label_myLv.text=r+"级会员",t.label_ennoble.text=gc.c_prop.ennobleType[o]},n._data_list_items=function(){for(var t=this,e=gd.guildCtrl.getAwardUi(),i=[],a=0;a<e.length;++a)i.push({memberData:t.data,ennobleData:e[a]});return i},i}(mo.gui.Dlg);t.GuildEnnobleDetail=e,egret.registerClass(e,"g_guild.GuildEnnobleDetail")}(g_guild||(g_guild={}));