var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.isRememberPwd=!0}__extends(n,t);var r=(__define,n),o=r.prototype;return o.quickLoginLocal=function(e,t){},o.saveUserAndPwd=function(e){if(this.isRememberPwd){var t=e.name,n=e.pwd;mo.setLocalStorageItem(gc.Keys.logined,!0,!0),mo.setLocalStorageItem(gc.Keys.accountName,t,!0),mo.setLocalStorageItem(gc.Keys.password,n,!0)}},o.checkLocal=function(e,t,n){var r=this,o=mo.getLocalStorageItem(gc.Keys.logined,!0),i=mo.getLocalStorageItem(gc.Keys.accountName,!0),s=mo.getLocalStorageItem(gc.Keys.password,!0);o&&null!=i&&null!=s?gd.AccountCtrl.login(i,s,egret.project.channelId,function(n){e.call(t,!0)},r):e.call(t)},o.loginLocal=function(t,n,r,o){var i=this;null==t||""==t||null==n||""==n?mo.showMsg(gc.id_c_msgCode.loginNotNull):gd.AccountCtrl.login(t,n,egret.project.channelId,function(s){e.localSdk.saveUserAndPwd({name:t,pwd:n}),r.call(o),i._localLoginCb&&i._localLoginCb.call(i._localLoginCtx,!0)},i)},o.popLoginLocal=function(t,n,r){var o=this;e.IndexLogin.create().show(),o._localLoginCb=t,o._localLoginCtx=n},o.registerLocal=function(t,n,r,o,i){var s=this;null==t||null==n||null==r||""==t||""==n||""==r?mo.showMsg(gc.id_c_msgCode.loginNotNull):t.length<6||t.length>12?mo.showMsg(gc.id_c_msgCode.accountLengthNotCorrect):n.length<6||n.length>12?mo.showMsg(gc.id_c_msgCode.pwdLengthNotCorrect):n!==r?mo.showMsg(gc.id_c_msgCode.pwdNotSame):gd.AccountCtrl.registerAccount(t,n,egret.project.channelId,function(){e.localSdk.saveUserAndPwd({name:t,pwd:n}),o&&o.call(i),s._localLoginCb&&s._localLoginCb.call(s._localLoginCtx,!0)},this)},n}(egret.Emitter);e.LocalSDK=t,egret.registerClass(t,"g_index.LocalSDK"),e.localSdk=new t}(g_index||(g_index={}));var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.isAutoLogin=!0,this.isMultiAccount=!0}__extends(n,t);var r=(__define,n),o=r.prototype;return o._initProp=function(){t.prototype._initProp.call(this);var e=this;e.defaultUI=!0,e.isValidIAP=!0,e.isRememberPwd=!0},o.checkLogin=function(t,n,r){e.localSdk.checkLocal(t,n,r)},o.login=function(t,n,r){var o=this;g_base.loginCtrl.clearRequestTimeOut(),e.localSdk.popLoginLocal(function(e){t.call(n,e)},o,r)},o.logout=function(e,t){mo.removeLocalStorageItem(gc.Keys.logined,!0),e.call(t),window.parent?window.parent.location.reload():location.reload()},o.enterGame=function(e,t){},o.pay=function(e,t,n,r){},n.CHANNEL_ID=99999,n}(g_channel.BaseSDKChannel);e.LocalChannel=t,egret.registerClass(t,"g_index.LocalChannel"),mo_channel.registerChannel(t)}(g_index||(g_index={}));var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var r=(__define,n),o=r.prototype;return o._tap_btnRegister=function(t){var n=this;e.localSdk.registerLocal(n.inputUser.text,n.inputPwd.text,n.inputConfirmPwd.text,function(){n.close()})},o._tap_btnCancel=function(t){var n=this;n.close(),e.IndexLogin.create().show()},n}(mo.gui.Dlg);e.IndexRegister=t,egret.registerClass(t,"g_index.IndexRegister")}(g_index||(g_index={}));var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var r=(__define,n),o=r.prototype;return o.init=function(){t.prototype.init.call(this)},o._tap_btnRegister=function(){var t=this;e.IndexRegister.create().show(),t.close()},o._tap_btnRemember=function(){var t=this;e.localSdk.isRememberPwd=!e.localSdk.isRememberPwd,t.markRemember.visible=e.localSdk.isRememberPwd},o._tap_btnQuickLogin=function(){},o._tap_btnLogin=function(){var t=this;e.localSdk.loginLocal(t.label_userName.text,t.label_pwd.text,function(){t.close()})},o._tap_btnForgetPwd=function(){},n}(mo.gui.Dlg);e.IndexLogin=t,egret.registerClass(t,"g_index.IndexLogin")}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),r=n.prototype;return r._tap_btn_retry=function(){var e=this;g_base.loginCtrl.loginChannel(),e.close()},t}(mo.gui.Layer);e.IndexRetry=t,egret.registerClass(t,"g_index.IndexRetry")}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(mo.gui.Layer);e.IndexBg=t,egret.registerClass(t,"g_index.IndexBg")}(g_index||(g_index={}));var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var r=(__define,n),o=r.prototype;return o._initProp=function(){t.prototype._initProp.call(this);var n=this;n._Item_list_new_server=e.IndexServerShortItem},o._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.label_curServer.touchChildren=e.label_curServer.touchEnabled=!0,e.btn_change.visible=mo_channel.getCurChannel().isMultiAccount,e.label_ver.text="v."+egret.project.gameVer},o.onEnter=function(){t.prototype.onEnter.call(this);var e=this;e.checkServersShow();var n=gd.HoodinnCtlr.LockedServer();if(n){var r=gd.serverInfoCtrl.getServerInfoById(parseInt(n));r&&(e.lyr_serverSelect.visible=!1,e.lyr_serverNew.visible=!1,e.grp_lock.visible=!0,e.showCurServer(r,!0))}},o.checkServersShow=function(){var e=this,t=mo.getLocalStorageItem("lastLoginServerId");if(null==t){e.lyr_serverSelect.visible=!1,e.lyr_serverNew.visible=!0,e.refreshList("list_new_server");var n=gd.serverInfoCtrl.getNewGoodServerIndex(),r=n[0],o=n[1];r>=0&&(e.list_new_server.selectedIndex=r,e._selectServer(gd.serverInfoCtrl.getServerByIndex(o)))}else e.lyr_serverSelect.visible=!0,e.lyr_serverNew.visible=!1,e.showCurServer(gd.serverInfoCtrl.getServerInfoById(t))},o._tap_btn_login=function(){egret.isNative?g_base.loginCtrl.enterGame(!1):gc.lzcl.waitingResult(function(e){g_base.loginCtrl.enterGame(!1)})},o._tap_btn_cur_server=function(){var e=this;e.selectServer()},o._tap_btn_new_server=function(){var e=this;e.selectServer()},o._tap_label_curServer=function(){var e=this;e.selectServer()},o._tap_btn_change=function(){var e=this;e.close(),g_base.loginCtrl.changeAccount()},o._tap_btn_notice=function(){var e=this;gd.NoticeCtrl.getNewOne(function(e){mo.showMsg(gc.id_c_msgCode.sysNotice,{sysNotice:e})},e)},o._click_list_new_server=function(e){var t=this,n=e.item;t._selectServer(n)},o._selectServer=function(e){if(!e[gc.dsConsts.ServerInfoEntity.isClose]){mo.setLocalStorageItem("lastLoginServerId",e[gc.dsConsts.ServerInfoEntity.id]);var t=e[gc.dsConsts.ServerInfoEntity.host],n=e[gc.dsConsts.ServerInfoEntity.port];mo.setLocalStorageItem(gc.Keys.key_host,t),mo.setLocalStorageItem(gc.Keys.key_port,n);var r=e[gc.dsConsts.ServerInfoEntity.indexId];gd.serverInfoCtrl.setSelectIndex(r),gd.serverInfoCtrl.setSelectServer(e)}},o._data_list_new_server=function(){return gd.serverInfoCtrl.getNewServers()},o.selectServer=function(){var t=this;t.indexServer=e.IndexServer.create().show().onClose(function(){t.showCurServer(t.indexServer.selectData),t.checkServersShow()})},o.showCurServer=function(e,t){if(null!=e){var n=this;mo.setLocalStorageItem("lastLoginServerId",e[gc.dsConsts.ServerInfoEntity.id]);var r=e[gc.dsConsts.ServerInfoEntity.host],o=e[gc.dsConsts.ServerInfoEntity.port];mo.setLocalStorageItem(gc.Keys.key_host,r),mo.setLocalStorageItem(gc.Keys.key_port,o);var i=e[gc.dsConsts.ServerInfoEntity.indexId];gd.serverInfoCtrl.setSelectIndex(i),gd.serverInfoCtrl.setSelectServer(e);var s=e[gc.dsConsts.ServerInfoEntity.status],a=["ntc_weihu","ntc_lianghao","","ntc_huobao",""],c=e[gc.dsConsts.ServerInfoEntity.closeExplain];t?(n.label_lock_server.text=e[gc.dsConsts.ServerInfoEntity.name]+"-"+e[gc.dsConsts.ServerInfoEntity.area],n.ico_lock_new.visible=e[gc.dsConsts.ServerInfoEntity.isNew],e[gc.dsConsts.ServerInfoEntity.isClose]?n.ico_lock_status.source=a[0]:n.ico_lock_status.source=a[s],n.label_lock_serverDesc.text=c||""):(n.label_curServer.text=e[gc.dsConsts.ServerInfoEntity.name]+"-"+e[gc.dsConsts.ServerInfoEntity.area],n.ico_new.visible=e[gc.dsConsts.ServerInfoEntity.isNew],e[gc.dsConsts.ServerInfoEntity.isClose]?n.ico_status.source=a[0]:n.ico_status.source=a[s],n.label_serverDesc.text=c||"")}},n}(mo.gui.Layer);e.IndexLayer=t,egret.registerClass(t,"g_index.IndexLayer")}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),r=n.prototype;return r._childrenCreated=function(){e.prototype._childrenCreated.call(this)},r._onItemCountChanged=function(e,t){},r.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,n=t.data[gc.dsConsts.ServerInfoEntity.status],r=["ntc_weihu","ntc_lianghao","","ntc_huobao",""];t.label_content.text=t.data[gc.dsConsts.ServerInfoEntity.name]+"-"+t.data[gc.dsConsts.ServerInfoEntity.area],t.ico_new.visible=t.data[gc.dsConsts.ServerInfoEntity.isNew],t.data[gc.dsConsts.ServerInfoEntity.isClose]?t.ico_status.source=r[0]:t.ico_status.source=r[n]},t}(mo.gui.ItemRenderer);e.IndexServerItem=t,egret.registerClass(t,"g_index.IndexServerItem")}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),r=n.prototype;return r._childrenCreated=function(){e.prototype._childrenCreated.call(this)},r._onItemCountChanged=function(e,t){},r.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this,n=t.data[gc.dsConsts.ServerInfoEntity.status],r=["ntc_weihu","ntc_lianghao","","ntc_huobao",""];t.label_content.text=t.data[gc.dsConsts.ServerInfoEntity.name]+"-"+t.data[gc.dsConsts.ServerInfoEntity.area],t.data[gc.dsConsts.ServerInfoEntity.isClose]?t.ico_status.source=r[0]:t.ico_status.source=r[n]},t}(mo.gui.ItemRenderer);e.IndexServerShortItem=t,egret.registerClass(t,"g_index.IndexServerShortItem")}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),r=n.prototype;return r._childrenCreated=function(){e.prototype._childrenCreated.call(this);var t=this;t.label_name.touchEnabled=!1},r.dataChanged=function(){e.prototype.dataChanged.call(this);var t=this;t.label_name.text=t.data},r._tap_btn_range=function(){var e=this;e.data;e.emitter.emit(e.__class.ON_BTN_RANGE,e.itemIndex,e)},t.ON_BTN_RANGE="ON_BTN_RANGE",t}(mo.gui.ItemRenderer);e.IndexServerRangeItem=t,egret.registerClass(t,"g_index.IndexServerRangeItem")}(g_index||(g_index={}));var g_index;!function(e){var t=function(t){function n(){t.apply(this,arguments),this.index=0,this.lastIndex=0}__extends(n,t);var r=(__define,n),o=r.prototype;return o._initProp=function(){t.prototype._initProp.call(this);var n=this;n._Item_list_server=e.IndexServerItem,n._Item_list_serverRange=e.IndexServerRangeItem},o._childrenCreated=function(){t.prototype._childrenCreated.call(this);var e=this;e.list_serverRange.selectedIndex=0,e.list_server.selectedIndex=0},o._initItem_list_serverRange=function(t){var n=this;t.emitter.on(e.IndexServerRangeItem.ON_BTN_RANGE,function(e){n.index=e,n.list_serverRange.selectedIndex=n.index,n.refreshList("list_server"),process.nextTick(function(){process.nextTick(function(){n.list_server.selectedIndex=0})})},n)},o._data_list_serverRange=function(){return gd.serverInfoCtrl.getTitleList().reverse()},o._data_list_server=function(){var e=this,t=0;return t=0==e.index?0:gd.serverInfoCtrl.getTitleList().length-1-e.index+1,gd.serverInfoCtrl.getServerList(t).reverse()},o._click_list_server=function(e){var t=this,n=e.item;if(0==n[gc.dsConsts.ServerInfoEntity.status])return void(t.list_server.selectedIndex=t.lastIndex);t.list_server.selectedIndex=t.lastIndex=e.itemIndex,t.selectData=n;var r=n[gc.dsConsts.ServerInfoEntity.host],o=n[gc.dsConsts.ServerInfoEntity.port];mo.setLocalStorageItem(gc.Keys.key_host,r),mo.setLocalStorageItem(gc.Keys.key_port,o);var i=n[gc.dsConsts.ServerInfoEntity.indexId];gd.serverInfoCtrl.setSelectIndex(i),gd.serverInfoCtrl.setSelectServer(n),t.close()},n}(mo.gui.Dlg);e.IndexServer=t,egret.registerClass(t,"g_index.IndexServer")}(g_index||(g_index={}));var egret;!function(e){var t;!function(e){e.fightSimulateEnabled=!0,e.registerValueHandler(function(t){e.setValue(t,"fightSimulateEnabled",!0)})}(t=e.project||(e.project={}))}(egret||(egret={}));var g_index;!function(e){logger.initLogger(e,"g-index"),logger.setLvl("g-index",4);var t=function(t){function n(){t.apply(this,arguments)}__extends(n,t);var r=(__define,n),o=r.prototype;return o.show=function(){var n=this;t.prototype.show.call(this),e.IndexBg.create().show();var r=mo_channel.getCurChannel();r.onChannelReay(function(){n._afterIndexBg()},n)},o._afterIndexBg=function(){var e=this,t=g_base.loginCtrl;gc.initData(function(){t.on(g_base.LoginCtrl.ON_LOGIN_SUCC,e.on_login_succ),t.on(g_base.LoginCtrl.ON_LOGIN_FAIL,e.on_login_fail),t.loginChannel()},e)},o.onExit=function(){var e=this;t.prototype.onExit.call(this),g_base.loginCtrl.un(g_base.LoginCtrl.ON_LOGIN_SUCC,e.on_login_succ),g_base.loginCtrl.un(g_base.LoginCtrl.ON_LOGIN_FAIL,e.on_login_fail)},o.on_login_succ=function(){var t=this;gd.serverInfoCtrl.getInfo(function(){e.IndexLayer.create().show(),mo_channel.getCurChannel().loadingProgress(100)},t)},o.on_login_fail=function(){e.IndexRetry.create().show()},n}(mo.gui.UIScene);e.IndexScene=t,egret.registerClass(t,"g_index.IndexScene"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.ModuleCfgItem;e.targetClass=t,mo.moduleMgr.registerModule(e),e.onPreAsync(function(e,t){t()})})}(g_index||(g_index={}));var g_index;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t),r=n.prototype;return r._initProp=function(){e.prototype._initProp.call(this);var t=this;t._layerOpt.shownWithAction=!1},r._childrenCreated=function(){var t=this;e.prototype._childrenCreated.call(this),t.label_content.text=t.moduleParam.content},r._tap_btn_ok=function(){this.close()},t}(mo.gui.Dlg);e.UserAgreement=t,egret.registerClass(t,"g_index.UserAgreement"),egret.Boot.once(egret.Boot.AFTER_CONFIG,function(){var e=new mo.ModuleCfgItem;e.targetClass=t,mo.moduleMgr.registerModule(e),e.onPreAsync(function(e,t){gd.protocolContentCtrl.getInfo(function(n){e.content=n[gc.dsConsts.ProtocolContentEntity.content],t()},this)})})}(g_index||(g_index={}));